Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	4	barplot
	2	create_output
	2	nucleotides
	1	retrieve_peaks
	10
Resources before job selection: {'_cores': 1, '_nodes': 9223372036854775807}
Ready jobs (2):
	create_output
	retrieve_peaks
Selected jobs (1):
	retrieve_peaks
Resources after job selection: {'_cores': 0, '_nodes': 9223372036854775806}

[Wed Aug 19 02:02:31 2020]
rule retrieve_peaks:
    input: data/processed/GCF/gene_centric_tss/files_used.json, data/processed/GCF/merged/samples.merge, data/processed/GCF/merged/samples.merge.peaksexpression.log2, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/
    output: data/processed/GCF/retrieve_peaks/files_used.json
    jobid: 9
    wildcards: anno=GCF

[Wed Aug 19 02:12:56 2020]
Finished job 9.
1 of 10 steps (10%) done
Resources before job selection: {'_cores': 1, '_nodes': 9223372036854775807}
Ready jobs (2):
	create_output
	create_output
Selected jobs (1):
	create_output
Resources after job selection: {'_cores': 0, '_nodes': 9223372036854775806}

[Wed Aug 19 02:12:56 2020]
rule create_output:
    input: data/processed/GCF/retrieve_peaks/files_used.json, data/processed/GCF/gene_centric_tss/txn_df_tissues.p, data/processed/GCF/genome/mRNA.peak, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/CHO/ATAC_ppr.naive_overlap.narrowPeak.sort, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/ATAC_merge.bed, data/processed/GCF/tissues_collapse/tissues.merge.peaksexpression.log10
    output: data/processed/GCF/eTSS/TSS.bed, data/processed/GCF/eTSS/refseq_centered.TSS.bed, data/processed/GCF/eTSS/TSS.exp.bed
    log: data/processed/GCF/eTSS/eTSS.log
    jobid: 1
    wildcards: anno=GCF

[Wed Aug 19 02:38:48 2020]
Finished job 1.
2 of 10 steps (20%) done
Resources before job selection: {'_cores': 1, '_nodes': 9223372036854775807}
Ready jobs (4):
	barplot
	create_output
	barplot
	nucleotides
Selected jobs (1):
	create_output
Resources after job selection: {'_cores': 0, '_nodes': 9223372036854775806}

[Wed Aug 19 02:38:48 2020]
rule create_output:
    input: data/processed/alt/retrieve_peaks/files_used.json, data/processed/alt/gene_centric_tss/txn_df_tissues.p, data/processed/alt/genome/mRNA.peak, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/CHO/ATAC_ppr.naive_overlap.narrowPeak.sort, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/ATAC_merge.bed, data/processed/alt/tissues_collapse/tissues.merge.peaksexpression.log10
    output: data/processed/alt/eTSS/TSS.bed, data/processed/alt/eTSS/refseq_centered.TSS.bed, data/processed/alt/eTSS/TSS.exp.bed
    log: data/processed/alt/eTSS/eTSS.log
    jobid: 2
    wildcards: anno=alt

[Wed Aug 19 03:04:28 2020]
Finished job 2.
3 of 10 steps (30%) done
Resources before job selection: {'_cores': 1, '_nodes': 9223372036854775807}
Ready jobs (6):
	barplot
	barplot
	nucleotides
	barplot
	barplot
	nucleotides
Selected jobs (1):
	barplot
Resources after job selection: {'_cores': 0, '_nodes': 9223372036854775806}

[Wed Aug 19 03:04:28 2020]
rule barplot:
    input: data/processed/GCF/eTSS/TSS.exp.bed, data/processed/GCF/gene_centric_tss/files_used.json
    output: figures/GCF/barplots_eTSS/bmdm/transcript_tissues_expressed.png
    log: figures/GCF/barplots_eTSS/bmdm/barplots.log
    jobid: 4
    wildcards: anno=GCF, merge=bmdm

Full Traceback (most recent call last):
  File "/home/isshamie/software/anaconda2/envs/TSS/lib/python3.7/site-packages/snakemake/executors.py", line 1428, in run_wrapper
    passed_shadow_dir)
  File "/data/isshamie/TSS/Analysis/TSS_code/snakefile", line 293, in __rule_barplot
  File "/home/isshamie/software/anaconda2/envs/TSS/lib/python3.7/site-packages/snakemake/shell.py", line 149, in __new__
    raise sp.CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command 'set -euo pipefail;  python tss/data/tss_barplots.py figures/GCF/barplots_eTSS/bmdm/transcript_tissues_expressed.png data/processed/GCF/eTSS/TSS.exp.bed data/processed/GCF/gene_centric_tss/files_used.json /data/isshamie/TSS/Analysis/Analysis_03302020/parameters/samples.tsv bmdm &> figures/GCF/barplots_eTSS/bmdm/barplots.log' returned non-zero exit status 1.

[Wed Aug 19 03:04:43 2020]
Error in rule barplot:
    jobid: 4
    output: figures/GCF/barplots_eTSS/bmdm/transcript_tissues_expressed.png
    log: figures/GCF/barplots_eTSS/bmdm/barplots.log (check log file(s) for error message)
    shell:
        python tss/data/tss_barplots.py figures/GCF/barplots_eTSS/bmdm/transcript_tissues_expressed.png data/processed/GCF/eTSS/TSS.exp.bed data/processed/GCF/gene_centric_tss/files_used.json /data/isshamie/TSS/Analysis/Analysis_03302020/parameters/samples.tsv bmdm &> figures/GCF/barplots_eTSS/bmdm/barplots.log
        (exited with non-zero exit code)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /data/isshamie/TSS/Analysis/TSS_code/.snakemake/log/2020-08-19T020230.871903.snakemake.log
unlocking
removing lock
removing lock
removed all locks
