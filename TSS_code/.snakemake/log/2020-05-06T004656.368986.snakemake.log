Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	2	barplot
	2	create_output
	1	gene_centric_tss
	1	retrieve_peaks
	7

[Wed May  6 00:46:56 2020]
rule create_output:
    input: data/processed/GCF/retrieve_peaks/files_used.json, data/processed/GCF/gene_centric_tss/txn_df_tissues.p, data/processed/GCF/genome/mRNA.peak, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/CHO/ATAC_ppr.naive_overlap.narrowPeak.sort, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/ATAC_merge.bed, data/processed/GCF/tissues_collapse/tissues.merge.peaksexpression.log10
    output: data/processed/GCF/eTSS/TSS.bed, data/processed/GCF/eTSS/refseq_centered.TSS.bed
    log: data/processed/GCF/eTSS/eTSS.log
    jobid: 1
    wildcards: anno=GCF

python tss/data/wrap_create_eTSS.py data/processed/GCF/eTSS/TSS.bed data/processed/GCF/retrieve_peaks/files_used.json data/processed/GCF/gene_centric_tss/txn_df_tissues.p data/processed/GCF/genome/mRNA.peak /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/CHO/ATAC_ppr.naive_overlap.narrowPeak.sort /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/ATAC_merge.bed data/processed/GCF/tissues_collapse/tissues.merge.peaksexpression.log10  &> data/processed/GCF/eTSS/eTSS.log
[Wed May  6 01:24:12 2020]
Finished job 1.
1 of 7 steps (14%) done

[Wed May  6 01:24:12 2020]
rule gene_centric_tss:
    input: data/processed/alt/merged/files_used.json, data/processed/alt/genome/start_site_mRNA.tsv, /data/isshamie/TSS/Analysis/Analysis_03302020/parameters/samples.tsv
    output: data/processed/alt/gene_centric_tss/txn_df.p, data/processed/alt/gene_centric_tss/files_used.json, data/processed/alt/gene_centric_tss/txn_df_tissues.p
    log: data/processed/alt/gene_centric_tss/gene_centric.log
    jobid: 10
    wildcards: anno=alt

python tss/data/gene_centric.py data/processed/alt/gene_centric_tss/txn_df.p data/processed/alt/merged/files_used.json data/processed/alt/genome/start_site_mRNA.tsv /data/isshamie/TSS/Analysis/Analysis_03302020/parameters/samples.tsv -- False -1000 1000 &> data/processed/alt/gene_centric_tss/gene_centric.log
[Wed May  6 01:42:58 2020]
Finished job 10.
2 of 7 steps (29%) done

[Wed May  6 01:42:58 2020]
rule retrieve_peaks:
    input: data/processed/alt/gene_centric_tss/files_used.json, data/processed/alt/merged/samples.merge, data/processed/alt/merged/samples.merge.peaksexpression.log2, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/
    output: data/processed/alt/retrieve_peaks/files_used.json
    log: data/processed/alt/retrieve_peaks/retrieve_peaks.log
    jobid: 9
    wildcards: anno=alt

python tss/data/retrieve_tss_peaks.py data/processed/alt/retrieve_peaks/files_used.json data/processed/alt/gene_centric_tss/files_used.json data/processed/alt/merged/samples.merge data/processed/alt/merged/samples.merge.peaksexpression.log2 /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/ &> data/processed/alt/retrieve_peaks/retrieve_peaks.log
[Wed May  6 01:53:18 2020]
Finished job 9.
3 of 7 steps (43%) done

[Wed May  6 01:53:18 2020]
rule create_output:
    input: data/processed/alt/retrieve_peaks/files_used.json, data/processed/alt/gene_centric_tss/txn_df_tissues.p, data/processed/alt/genome/mRNA.peak, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/CHO/ATAC_ppr.naive_overlap.narrowPeak.sort, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/ATAC_merge.bed, data/processed/alt/tissues_collapse/tissues.merge.peaksexpression.log10
    output: data/processed/alt/eTSS/TSS.bed, data/processed/alt/eTSS/refseq_centered.TSS.bed
    log: data/processed/alt/eTSS/eTSS.log
    jobid: 2
    wildcards: anno=alt

python tss/data/wrap_create_eTSS.py data/processed/alt/eTSS/TSS.bed data/processed/alt/retrieve_peaks/files_used.json data/processed/alt/gene_centric_tss/txn_df_tissues.p data/processed/alt/genome/mRNA.peak /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/CHO/ATAC_ppr.naive_overlap.narrowPeak.sort /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/Results/ATAC_results/ATAC_merge.bed data/processed/alt/tissues_collapse/tissues.merge.peaksexpression.log10  &> data/processed/alt/eTSS/eTSS.log
[Wed May  6 02:24:42 2020]
Finished job 2.
4 of 7 steps (57%) done

[Wed May  6 02:24:42 2020]
rule barplot:
    input: data/processed/GCF/eTSS/TSS.bed
    output: figures/GCF/barplots_eTSS/transcript_tissues_expressed.png
    log: figures/GCF/barplots_eTSS/barplots.log
    jobid: 3
    wildcards: anno=GCF

python tss/data/tss_barplots.py data/processed/GCF/eTSS/TSS.bed figures/GCF/barplots_eTSS/transcript_tissues_expressed.png /data/isshamie/TSS/Analysis/Analysis_03302020/parameters/samples.tsv &> figures/GCF/barplots_eTSS/barplots.log
[Wed May  6 02:24:44 2020]
Error in rule barplot:
    jobid: 3
    output: figures/GCF/barplots_eTSS/transcript_tissues_expressed.png
    log: figures/GCF/barplots_eTSS/barplots.log (check log file(s) for error message)
    shell:
        python tss/data/tss_barplots.py data/processed/GCF/eTSS/TSS.bed figures/GCF/barplots_eTSS/transcript_tissues_expressed.png /data/isshamie/TSS/Analysis/Analysis_03302020/parameters/samples.tsv &> figures/GCF/barplots_eTSS/barplots.log
        (exited with non-zero exit code)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /data/isshamie/TSS/Analysis/TSS_code/.snakemake/log/2020-05-06T004656.368986.snakemake.log
