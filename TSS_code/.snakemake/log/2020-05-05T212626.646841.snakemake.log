Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	2	barplot
	2	create_output
	2	gene_centric_tss
	2	merge_peaks
	2	peak_expression_and_location
	2	retrieve_peaks
	13

[Tue May  5 21:26:26 2020]
rule merge_peaks:
    input: data/processed/GCF/genome/start_site_mRNA.tsv, /data/isshamie/genome/hamster/ncbi_anno_103/GCF_003668045.1_CriGri-PICR/GCF_003668045.1_CriGri-PICR_genomic.gff
    output: data/processed/GCF/merged/samples.merge
    log: data/processed/GCF/merged/merged.log
    jobid: 11
    wildcards: anno=GCF

python tss/data/merging.py data/processed/GCF/genome/start_site_mRNA.tsv /data/isshamie/genome/hamster/ncbi_anno_103/GCF_003668045.1_CriGri-PICR/GCF_003668045.1_CriGri-PICR_genomic.gff data/processed/GCF/merged/samples.merge /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/ /data/isshamie/genome/ncbi_anno_103/GCF_003668045.1_CriGri-PICR_genomic.fna to_merge &> data/processed/GCF/merged/merged.log
[Tue May  5 21:33:52 2020]
Finished job 11.
1 of 13 steps (8%) done

[Tue May  5 21:33:52 2020]
rule peak_expression_and_location:
    input: data/processed/GCF/genome/start_site_mRNA.tsv, /data/isshamie/genome/hamster/ncbi_anno_103/GCF_003668045.1_CriGri-PICR/GCF_003668045.1_CriGri-PICR_genomic.gff, data/processed/GCF/merged/samples.merge
    output: data/processed/GCF/merged/peaks_with_tss_distances_size1.noCDS.peak, data/processed/GCF/merged/files_used.json, data/processed/GCF/merged/samples.merge.peaksexpression.log2
    log: data/processed/GCF/merged/anno_and_exp.log
    jobid: 12
    wildcards: anno=GCF

python tss/data/merging.py data/processed/GCF/genome/start_site_mRNA.tsv /data/isshamie/genome/hamster/ncbi_anno_103/GCF_003668045.1_CriGri-PICR/GCF_003668045.1_CriGri-PICR_genomic.gff data/processed/GCF/merged/peaks_with_tss_distances_size1.noCDS.peak /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/ /data/isshamie/genome/ncbi_anno_103/GCF_003668045.1_CriGri-PICR_genomic.fna to_anno_and_exp &> data/processed/GCF/merged/anno_and_exp.log
[Tue May  5 21:38:30 2020]
Finished job 12.
2 of 13 steps (15%) done

[Tue May  5 21:38:30 2020]
rule merge_peaks:
    input: data/processed/alt/genome/start_site_mRNA.tsv, /data/isshamie/genome/hamster/ncbi_anno_103/alt_CriGri-PICR_top_level.gff3
    output: data/processed/alt/merged/samples.merge
    log: data/processed/alt/merged/merged.log
    jobid: 13
    wildcards: anno=alt

python tss/data/merging.py data/processed/alt/genome/start_site_mRNA.tsv /data/isshamie/genome/hamster/ncbi_anno_103/alt_CriGri-PICR_top_level.gff3 data/processed/alt/merged/samples.merge /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/ /data/isshamie/genome/ncbi_anno_103/GCF_003668045.1_CriGri-PICR_genomic.fna to_merge &> data/processed/alt/merged/merged.log
[Tue May  5 21:44:54 2020]
Finished job 13.
3 of 13 steps (23%) done

[Tue May  5 21:44:54 2020]
rule peak_expression_and_location:
    input: data/processed/alt/genome/start_site_mRNA.tsv, /data/isshamie/genome/hamster/ncbi_anno_103/alt_CriGri-PICR_top_level.gff3, data/processed/alt/merged/samples.merge
    output: data/processed/alt/merged/peaks_with_tss_distances_size1.noCDS.peak, data/processed/alt/merged/files_used.json, data/processed/alt/merged/samples.merge.peaksexpression.log2
    log: data/processed/alt/merged/anno_and_exp.log
    jobid: 14
    wildcards: anno=alt

python tss/data/merging.py data/processed/alt/genome/start_site_mRNA.tsv /data/isshamie/genome/hamster/ncbi_anno_103/alt_CriGri-PICR_top_level.gff3 data/processed/alt/merged/peaks_with_tss_distances_size1.noCDS.peak /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/ /data/isshamie/genome/ncbi_anno_103/GCF_003668045.1_CriGri-PICR_genomic.fna to_anno_and_exp &> data/processed/alt/merged/anno_and_exp.log
[Tue May  5 21:48:58 2020]
Finished job 14.
4 of 13 steps (31%) done

[Tue May  5 21:48:58 2020]
rule gene_centric_tss:
    input: data/processed/GCF/merged/files_used.json, data/processed/GCF/genome/start_site_mRNA.tsv, /data/isshamie/TSS/Analysis/Analysis_03302020/parameters/samples.tsv
    output: data/processed/GCF/gene_centric_tss/txn_df.p, data/processed/GCF/gene_centric_tss/files_used.json
    log: data/processed/GCF/gene_centric_tss/gene_centric.log
    jobid: 6
    wildcards: anno=GCF

python tss/data/gene_centric.py data/processed/GCF/gene_centric_tss/txn_df.p data/processed/GCF/merged/files_used.json data/processed/GCF/genome/start_site_mRNA.tsv /data/isshamie/TSS/Analysis/Analysis_03302020/parameters/samples.tsv -- False -1000 1000 &> data/processed/GCF/gene_centric_tss/gene_centric.log
[Tue May  5 22:07:42 2020]
Finished job 6.
5 of 13 steps (38%) done

[Tue May  5 22:07:42 2020]
rule retrieve_peaks:
    input: data/processed/GCF/gene_centric_tss/files_used.json, data/processed/GCF/merged/samples.merge, data/processed/GCF/merged/samples.merge.peaksexpression.log2, /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/
    output: data/processed/GCF/retrieve_peaks/files_used.json
    jobid: 5
    wildcards: anno=GCF

python tss/data/retrieve_tss_peaks.py data/processed/GCF/retrieve_peaks/files_used.json data/processed/GCF/gene_centric_tss/files_used.json data/processed/GCF/merged/samples.merge data/processed/GCF/merged/samples.merge.peaksexpression.log2 /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/
[Tue May  5 22:17:32 2020]
Error in rule retrieve_peaks:
    jobid: 5
    output: data/processed/GCF/retrieve_peaks/files_used.json
    shell:
        python tss/data/retrieve_tss_peaks.py data/processed/GCF/retrieve_peaks/files_used.json data/processed/GCF/gene_centric_tss/files_used.json data/processed/GCF/merged/samples.merge data/processed/GCF/merged/samples.merge.peaksexpression.log2 /data/isshamie/TSS/Analysis/Analysis_NCBI_PICR/f04_peaks/
        (exited with non-zero exit code)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /data/isshamie/TSS/Analysis/TSS_code/.snakemake/log/2020-05-05T212626.646841.snakemake.log
